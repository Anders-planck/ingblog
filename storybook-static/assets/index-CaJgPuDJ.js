import{f as te,u as M,a as G,j as s,B as b,c as L,r as h,p as F,g as T,e as Q,i as oe,k as ae,T as B}from"./Text-C7Dh7ZI7.js";import{r as C}from"./index-CDs2tPxN.js";import{u as A,S as _,C as q,f as re}from"./utils-CCbRh-jk.js";import{U as ie,T as ne,L as de,r as le,u as ce,s as me,a as ue,b as he,c as ge,d as pe,I as fe,D as W}from"./index-C6fpFkSX.js";import{u as ve,P as J}from"./routes-C62HzLZK.js";import{T as xe}from"./Title--B-sobQY.js";import{G as w}from"./Group-CXAjiDjl.js";import{A as ke}from"./Avatar-CFaihW2U.js";import{c as E}from"./createReactComponent-BZ78rv5h.js";var U={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const K={orientation:"horizontal"},ye=L((t,{borderWidth:a})=>({group:{"--ai-border-width":h(a)}})),H=te((t,a)=>{const o=M("ActionIconGroup",K,t),{className:e,style:r,classNames:n,styles:l,unstyled:d,orientation:g,vars:i,borderWidth:c,variant:p,mod:f,...u}=M("ActionIconGroup",K,t),m=G({name:"ActionIconGroup",props:o,classes:U,className:e,style:r,classNames:n,styles:l,unstyled:d,vars:i,varsResolver:ye,rootSelector:"group"});return s.jsx(b,{...m("group"),ref:a,variant:p,mod:[{"data-orientation":g},f],role:"group",...u})});H.classes=U;H.displayName="@mantine/core/ActionIconGroup";const be={},je=L((t,{size:a,radius:o,variant:e,gradient:r,color:n,autoContrast:l})=>{const d=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:e||"filled",autoContrast:l});return{root:{"--ai-size":T(a,"ai-size"),"--ai-radius":o===void 0?void 0:Q(o),"--ai-bg":n||e?d.background:void 0,"--ai-hover":n||e?d.hover:void 0,"--ai-hover-color":n||e?d.hoverColor:void 0,"--ai-color":d.color,"--ai-bd":n||e?d.border:void 0}}}),N=F((t,a)=>{const o=M("ActionIcon",be,t),{className:e,unstyled:r,variant:n,classNames:l,styles:d,style:g,loading:i,loaderProps:c,size:p,color:f,radius:u,__staticSelector:m,gradient:x,vars:j,children:I,disabled:v,"data-disabled":y,autoContrast:z,mod:k,...$}=o,S=G({name:["ActionIcon",m],props:o,className:e,style:g,classes:U,classNames:l,styles:d,unstyled:r,vars:j,varsResolver:je});return s.jsxs(ie,{...S("root",{active:!v&&!i&&!y}),...$,unstyled:r,variant:n,size:p,disabled:v||i,ref:a,mod:[{loading:i,disabled:v||y},k],children:[s.jsx(ne,{mounted:!!i,transition:"slide-down",duration:150,children:se=>s.jsx(b,{component:"span",...S("loader",{style:se}),"aria-hidden":!0,children:s.jsx(de,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),s.jsx(b,{component:"span",mod:{loading:i},...S("icon"),children:I})]})});N.classes=U;N.displayName="@mantine/core/ActionIcon";N.Group=H;var Z={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Ie={},Se=L((t,{radius:a,color:o,gradient:e,variant:r,size:n,autoContrast:l})=>{const d=t.variantColorResolver({color:o||t.primaryColor,theme:t,gradient:e,variant:r||"filled",autoContrast:l});return{root:{"--badge-height":T(n,"badge-height"),"--badge-padding-x":T(n,"badge-padding-x"),"--badge-fz":T(n,"badge-fz"),"--badge-radius":a===void 0?void 0:Q(a),"--badge-bg":o||r?d.background:void 0,"--badge-color":o||r?d.color:void 0,"--badge-bd":o||r?d.border:void 0,"--badge-dot-color":r==="dot"?oe(o,t):void 0}}}),V=F((t,a)=>{const o=M("Badge",Ie,t),{classNames:e,className:r,style:n,styles:l,unstyled:d,vars:g,radius:i,color:c,gradient:p,leftSection:f,rightSection:u,children:m,variant:x,fullWidth:j,autoContrast:I,circle:v,mod:y,...z}=o,k=G({name:"Badge",props:o,classes:Z,className:r,style:n,classNames:e,styles:l,unstyled:d,vars:g,varsResolver:Se});return s.jsxs(b,{variant:x,mod:[{block:j,circle:v},y],...k("root",{variant:x}),ref:a,...z,children:[f&&s.jsx("span",{...k("section"),"data-position":"left",children:f}),s.jsx("span",{...k("label"),children:m}),u&&s.jsx("span",{...k("section"),"data-position":"right",children:u})]})});V.classes=Z;V.displayName="@mantine/core/Badge";var ee={root:"m_9e117634"};const _e={},we=L((t,{radius:a,fit:o})=>({root:{"--image-radius":a===void 0?void 0:Q(a),"--image-object-fit":o}})),O=F((t,a)=>{const o=M("Image",_e,t),{classNames:e,className:r,style:n,styles:l,unstyled:d,vars:g,onError:i,src:c,radius:p,fit:f,fallbackSrc:u,mod:m,...x}=o,[j,I]=C.useState(!c);C.useEffect(()=>I(!c),[c]);const v=G({name:"Image",classes:ee,props:o,className:r,style:n,classNames:e,styles:l,unstyled:d,vars:g,varsResolver:we});return j&&u?s.jsx(b,{component:"img",ref:a,src:u,...v("root"),onError:i,mod:["fallback",m],...x}):s.jsx(b,{component:"img",ref:a,...v("root"),src:c,onError:y=>{i==null||i(y),I(!0)},mod:m,...x})});O.classes=ee;O.displayName="@mantine/core/Image";/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ne=E("outline","bookmarks","IconBookmarks",[["path",{d:"M15 10v11l-5 -3l-5 3v-11a3 3 0 0 1 3 -3h4a3 3 0 0 1 3 3z",key:"svg-0"}],["path",{d:"M11 3h5a3 3 0 0 1 3 3v11",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pe=E("outline","message-plus","IconMessagePlus",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M12.01 18.594l-4.01 2.406v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16v6",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ze=E("filled","bookmarks-filled","IconBookmarksFilled",[["path",{d:"M12 6a4 4 0 0 1 4 4v11a1 1 0 0 1 -1.514 .857l-4.486 -2.691l-4.486 2.691a1 1 0 0 1 -1.508 -.743l-.006 -.114v-11a4 4 0 0 1 4 -4h4z",key:"svg-0"}],["path",{d:"M16 2a4 4 0 0 1 4 4v11a1 1 0 0 1 -2 0v-11a2 2 0 0 0 -2 -2h-5a1 1 0 0 1 0 -2h5z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Be=E("filled","heart-filled","IconHeartFilled",[["path",{d:"M6.979 3.074a6 6 0 0 1 4.988 1.425l.037 .033l.034 -.03a6 6 0 0 1 4.733 -1.44l.246 .036a6 6 0 0 1 3.364 10.008l-.18 .185l-.048 .041l-7.45 7.379a1 1 0 0 1 -1.313 .082l-.094 -.082l-7.493 -7.422a6 6 0 0 1 3.176 -10.215z",key:"svg-0"}]]);function Ce(t){let a=t,o=!1;const e=new Set;return{getState(){return a},updateState(r){a=typeof r=="function"?r(a):r},setState(r){this.updateState(r),e.forEach(n=>n(a))},initialize(r){o||(a=r,o=!0)},subscribe(r){return e.add(r),()=>e.delete(r)}}}const Me=()=>Ce({notifications:[],queue:[],limit:5}),R=Me();function P(t,a){const o=t.getState(),e=a([...o.notifications,...o.queue]);t.setState({notifications:e.slice(0,o.limit),queue:e.slice(o.limit),limit:o.limit})}function Re(t,a=R){const o=t.id||le();return P(a,e=>t.id&&e.some(r=>r.id===t.id)?e:[...e,{...t,id:o}]),o}function $e(t,a=R){return P(a,o=>o.filter(e=>{var r;return e.id===t?((r=e.onClose)==null||r.call(e,e),!1):!0})),t}function Ae(t,a=R){return P(a,o=>o.map(e=>e.id===t.id?{...e,...t}:e)),t.id}function Te(t=R){P(t,()=>[])}function Ge(t=R){P(t,a=>a.slice(0,t.getState().limit))}const X={show:Re,hide:$e,update:Ae,clean:Te,cleanQueue:Ge,updateState:P},Le="_card_xsh8l_1",Ee="_title_xsh8l_5",Ue="_footer_xsh8l_17",D={card:Le,title:Ee,footer:Ue};function Y({skeleton:t,...a}){var z,k,$;const o=ae(),e=t?{}:a.item,r=A({base:"none",md:"auto"}),n=A({base:!1,md:!0}),l=A({base:"xs",md:"none"}),d=A({base:"none",md:"lg"}),g=ve(),i=ce(me),{data:c}=ue({postId:e.id,authorId:i==null?void 0:i.id},{skip:!i||!e.id}),{data:p}=he({postId:e.id,authorId:i==null?void 0:i.id},{skip:!i||!e.id}),[f,u]=C.useState(c??!1),[m,x]=C.useState(p??!1),[j]=ge(),[I]=pe(),v=async()=>{if(!i)return;const{error:S}=await I({isLiked:f,postId:e.id,authorId:i.id});if(S){X.show({title:"Sorry",message:"Something wrong ðŸ¤¥",color:"red"});return}u(!f)},y=async()=>{if(!i)return;const{error:S}=await j({isBookmarked:m,postId:e.id,authorId:i.id});if(S){X.show({title:"Sorry",message:"Something wrong ðŸ¤¥",color:"red"});return}x(!m)};return C.useEffect(()=>{c!==void 0&&u(c),p!==void 0&&x(p)},[c,p]),t?s.jsxs(b,{p:l,id:`post-skeleton-${e.id}`,children:[s.jsx(_,{height:60,circle:!0,mb:"xs"}),s.jsx(_,{height:180,radius:"sm"}),s.jsx(_,{height:20,mt:6,radius:"xl"}),s.jsx(_,{height:8,mt:6,width:"100%",radius:"xl"}),s.jsx(_,{height:8,mt:6,width:"60%",radius:"xl"}),s.jsx(_,{height:8,mt:6,width:"20%",radius:"xl"})]}):s.jsxs(q,{id:`post-${e.id}`,withBorder:n,padding:r,radius:d,className:D.card,children:[e.image&&s.jsx(q.Section,{children:s.jsx(O,{src:e.image,alt:e.title,height:180})}),s.jsxs(b,{px:l,pt:l,children:[s.jsx(V,{w:"fit-content",variant:"light",children:e.category}),s.jsx(xe,{order:2,fw:700,className:D.title,mt:"xs",onClick:()=>{g(`${J}/${e.id}`)},children:e.title}),s.jsxs(w,{mt:"sm",gap:"xs",children:[s.jsx(ke,{src:e.author.avatar,radius:"sm"}),s.jsxs("div",{children:[s.jsx(B,{fw:500,children:e.author.name}),s.jsx(B,{fz:"xs",c:"dimmed",children:re(new Date(e.createdAt))})]})]})]}),s.jsx(q.Section,{className:D.footer,children:s.jsx(w,{justify:"flex-end",children:s.jsxs(w,{gap:0,children:[s.jsxs(w,{gap:0,children:[s.jsx(B,{fz:"xs",c:"dimmed",fw:600,children:((z=e.likes)==null?void 0:z.length)??0}),s.jsx(N,{variant:"subtle",color:"gray",onClick:v,children:f?s.jsx(Be,{style:{width:h(20),height:h(20)},color:o.colors.red[6],stroke:1.5}):s.jsx(fe,{style:{width:h(20),height:h(20)},color:o.colors.red[6],stroke:1.5})})]}),s.jsx(W,{orientation:"vertical",size:"sm",mx:4}),s.jsxs(w,{gap:0,children:[s.jsx(B,{fz:"xs",c:"dimmed",fw:600,children:((k=e.bookmarks)==null?void 0:k.length)??0}),s.jsx(N,{variant:"subtle",color:"gray",onClick:y,children:m?s.jsx(ze,{style:{width:h(20),height:h(20)},color:o.colors.yellow[6],stroke:1.5}):s.jsx(Ne,{style:{width:h(20),height:h(20)},color:o.colors.yellow[6],stroke:1.5})})]}),s.jsx(W,{orientation:"vertical",size:"sm",mx:4}),s.jsxs(w,{gap:0,children:[s.jsx(B,{fz:"xs",c:"dimmed",fw:600,children:(($=e.comments)==null?void 0:$.length)??0}),s.jsx(N,{variant:"subtle",color:"gray",onClick:()=>{g(`${J}/${e.id}?#comments`)},children:s.jsx(Pe,{style:{width:h(20),height:h(20)},color:o.colors.blue[6],stroke:1.5})})]})]})})})]})}try{Y.displayName="Post",Y.__docgenInfo={description:"",displayName:"Post",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Post"}},skeleton:{defaultValue:null,description:"",name:"skeleton",required:!1,type:{name:"boolean"}}}}}catch{}export{N as A,O as I,Y as P,X as n};
